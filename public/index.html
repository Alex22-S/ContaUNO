<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContaUNO - Contabilidad Inteligente</title>
    <link rel="icon" type="image/png" href="images/favicon.png"> 

    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="CSS/calendar.css">
    <link rel="stylesheet" href="CSS/form.css">
    <link rel="stylesheet" href="CSS/balance.css"> 
    <link rel="stylesheet" href="CSS/analysis.css">
    <link rel="stylesheet" href="CSS/invoices.css">
    <link rel="stylesheet" href="CSS/inventory.css">
    <link rel="stylesheet" href="CSS/notifications.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf-autotable.umd.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
</head>
<body class="dark-mode"> <div class="floating-elements" id="floatingElements"></div>
    
    <header class="header">
        <nav class="nav">
            <div class="logo">ContaUNO</div>
            <div class="nav-links">
                <a href="#" class="nav-link">Inicio</a>
                <a href="#" class="nav-link">Caracter√≠sticas</a>
                <a href="#" class="nav-link">Precios</a>
                <a href="#" class="nav-link">Soporte</a>
                <div class="theme-switcher">
                    <input type="checkbox" id="theme-toggle">
                    <label for="theme-toggle">
                        <span class="sun">‚òÄÔ∏è</span>
                        <span class="moon">üåô</span>
                    </label>
                </div>
            </div>
        </nav>
    </header>

    <main class="hero" id="hero">
        <h1 class="hero-title">ContaUNO</h1>
        <p class="hero-subtitle">Selecciona el modo que mejor se adapte a tus necesidades empresariales</p>
        
        <div class="level-selector">
            <div class="level-card basic" onclick="showDashboard('basic')">
                <div class="level-icon">üå±</div>
                <h3 class="level-title">Contabilidad B√°sica</h3>
                <p class="level-description">Perfecto para emprendedores y peque√±os negocios. Funciones simples y guiadas paso a paso.</p>
            </div>
            
            <div class="level-card intermediate" onclick="showDashboard('intermediate')">
                <div class="level-icon">üìä</div>
                <h3 class="level-title">Contabilidad Media</h3>
                <p class="level-description">Para empresas en crecimiento. Herramientas intermedias con an√°lisis detallados.</p>
            </div>
            
            <div class="level-card advanced" onclick="showDashboard('advanced')">
                <div class="level-icon">üöÄ</div>
                <h3 class="level-title">Contabilidad Avanzada</h3>
                <p class="level-description">Para contadores profesionales. Funciones complejas y an√°lisis profundos.</p>
            </div>
        </div>
    </main>

    <div class="calendar-view" id="calendar-view">
        <button class="back-btn" onclick="showDashboard('basic')">‚Üê Volver</button>
        <div class="calendar-container">
            <div class="calendar-header">
                <h2 class="calendar-main-title">Registro de Transacciones</h2>
                <div class="calendar-controls">
                    <select id="month-select" onchange="updateCalendar()">
                        <option value="0">Enero</option>
                        <option value="1">Febrero</option>
                        <option value="2">Marzo</option>
                        <option value="3">Abril</option>
                        <option value="4">Mayo</option>
                        <option value="5">Junio</option>
                        <option value="6">Julio</option>
                        <option value="7">Agosto</option>
                        <option value="8">Septiembre</option>
                        <option value="9">Octubre</option>
                        <option value="10">Noviembre</option>
                        <option value="11">Diciembre</option>
                    </select>
                    <select id="year-select" onchange="updateCalendar()"></select>
                </div>
            </div>
            
            <div class="calendar-content">
                <div class="calendar-grid-container">
                    <div class="calendar-grid" id="calendar-grid">
                        <div class="calendar-day-header">Lun</div>
                        <div class="calendar-day-header">Mar</div>
                        <div class="calendar-day-header">Mi√©</div>
                        <div class="calendar-day-header">Jue</div>
                        <div class="calendar-day-header">Vie</div>
                        <div class="calendar-day-header">S√°b</div>
                        <div class="calendar-day-header">Dom</div>
                    </div>
                </div>

                <div class="calendar-summary">
                    <h3 class="summary-title">Resumen del Mes</h3>
                    <div class="summary-card income">
                        <div class="summary-info">
                            <span class="summary-label">Ingresos</span>
                            <span class="summary-value" id="monthly-income">$0</span>
                        </div>
                    </div>
                    <div class="summary-card expense">
                        <div class="summary-info">
                            <span class="summary-label">Gastos</span>
                            <span class="summary-value" id="monthly-expenses">$0</span>
                        </div>
                    </div>
                    <div class="summary-card balance">
                         <div class="summary-info">
                            <span class="summary-label">Balance</span>
                            <span class="summary-value" id="monthly-balance">$0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-view" id="form-view">
        <div class="form-page-layout">
            <div class="form-wrapper">
                <div class="form-header-full">
                    <h2 id="form-title">Registrar Movimiento</h2>
                    <button class="back-btn-form" onclick="showCalendar()">‚Üê Volver al Calendario</button>
                </div>
                <form id="transaction-form-full">
                    <input type="hidden" id="editing-transaction-id">

                    <div class="form-group template-group">
                        <label for="template-select">Aplicar Plantilla</label>
                        <div class="template-manager">
                            <select id="template-select">
                                <option value="">-- Selecciona una plantilla --</option>
                            </select>
                            <button type="button" id="edit-template-btn" title="Renombrar Plantilla Seleccionada">‚úèÔ∏è</button>
                            <button type="button" id="delete-template-btn" title="Eliminar Plantilla Seleccionada">üóëÔ∏è</button>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="form-date-display">Fecha</label>
                                <input type="text" id="form-date-display" readonly>
                            </div>
                            <div class="form-group">
                                <label for="form-type">Tipo de Movimiento</label>
                                <select id="form-type" required>
                                    <option value="income">üí∞ Ingreso</option>
                                    <option value="expense">üí∏ Gasto</option>
                                </select>
                            </div>
                            
                            <div class="form-group category-group">
                                <label for="form-category">Categor√≠a</label>
                                <div class="category-manager">
                                    <select id="form-category" required></select>
                                    <button type="button" id="add-category-btn" title="A√±adir Categor√≠a">‚ûï</button>
                                    <button type="button" id="edit-category-btn" title="Editar Categor√≠a Seleccionada">‚úèÔ∏è</button>
                                    <button type="button" id="delete-category-btn" title="Eliminar Categor√≠a Seleccionada">üóëÔ∏è</button>
                                </div>
                            </div>

                            <div id="standard-fields-group">
                                <div class="form-group">
                                    <label for="form-description">Descripci√≥n Corta</label>
                                    <input type="text" id="form-description" required placeholder="Ej: Venta de mercanc√≠a, pago de arriendo...">
                                </div>
                            </div>

                        </div>
                        <div class="form-column">
                             <div class="form-group">
                                <label for="form-provider">Proveedor / Cliente (Opcional)</label>
                                <input type="text" id="form-provider" placeholder="Nombre del tercero">
                            </div>
                            <div class="form-group">
                                <label for="form-provider-id">NIT / C.C. (Opcional)</label>
                                <input type="text" id="form-provider-id" placeholder="N√∫mero de identificaci√≥n">
                            </div>
                            <div class="form-group">
                                <label for="form-notes">Notas / Observaciones (Opcional)</label>
                                <textarea id="form-notes" rows="2" placeholder="Detalles adicionales del movimiento..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div id="inventory-section" style="display: none; margin-top: 1.5rem;">
                        <hr class="form-divider">
                        <h3 class="form-section-title-small">Detalle de Inventario</h3>
                        <div class="inventory-item-adder">
                            <select id="inventory-product-select" class="inventory-input"></select>
                            <input type="number" id="inventory-quantity" placeholder="Cant." min="1" step="1" class="inventory-input quantity">
                            <input type="number" id="inventory-unit-price" placeholder="Precio Unit." step="0.01" min="0" class="inventory-input price">
                            <button type="button" id="add-inventory-item-btn" class="btn-add-item">+</button>
                        </div>
                        <div id="inventory-items-list-container">
                            </div>
                    </div>
                    <div class="form-group amount-group">
                        <label for="form-amount">Monto Total</label>
                        <input type="number" id="form-amount" step="0.01" min="0" required placeholder="0.00">
                    </div>

                    <div class="form-actions-full">
                        <button type="submit" class="save-btn" id="save-transaction-btn">üíæ Guardar Transacci√≥n</button>
                        <button type="button" class="template-btn" id="save-template-btn">‚≠ê Guardar Plantilla</button>
                        <button type="button" class="cancel-btn" onclick="clearFormAndReturn()">‚ùå Cancelar / Volver</button>
                    </div>
                </form>
            </div>

            <div class="daily-summary-panel">
                <div class="daily-summary-header">
                    <h3>Movimientos del D√≠a</h3>
                    <button id="download-pdf-btn" class="pdf-btn" title="Descargar Resumen en PDF">üìÑ PDF</button>
                </div>
                <div class="daily-transactions-list" id="daily-transactions-list">
                    <p class="no-transactions-msg">No hay movimientos registrados para este d√≠a.</p>
                </div>
                <div class="daily-summary-footer">
                    <div class="footer-item">
                        <span>Ingresos:</span>
                        <span id="daily-income" class="positive-value">$0</span>
                    </div>
                    <div class="footer-item">
                        <span>Gastos:</span>
                        <span id="daily-expenses" class="negative-value">$0</span>
                    </div>
                     <div class="footer-item total">
                        <span>Balance del D√≠a:</span>
                        <span id="daily-balance">$0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="balance-view" id="balance-view">
        <button class="back-btn" onclick="showDashboard('basic')">‚Üê Volver</button>

        <div class="balance-container">
            <div class="balance-header">
                <h2 class="balance-main-title">Balance Simple</h2>
                <div class="balance-controls">
                    <select id="balance-month-select" onchange="updateBalanceView()"></select>
                    <select id="balance-year-select" onchange="updateBalanceView()"></select>
                </div>
            </div>

            <div class="balance-view-toggle">
                <button id="btn-weekly-view" class="active" onclick="switchBalanceView('weekly')">üóìÔ∏è Semanal</button>
                <button id="btn-monthly-view" onclick="switchBalanceView('monthly')">üìä Mensual</button>
                <button id="btn-annual-view" onclick="switchBalanceView('annual')">üöÄ Anual</button>
            </div>

            <div id="balance-content-container" class="balance-content-view active">
                <div class="monthly-summary-panel">
                    <div class="monthly-summary-header">
                        <h3 class="monthly-summary-title" id="summary-period-title">Resumen Total del Mes</h3>
                        <button id="download-summary-pdf" class="pdf-btn-main" title="Descargar Resumen en PDF">
                            <span class="icon">üìÑ</span>
                            Descargar PDF
                        </button>
                    </div>
                    <div class="monthly-summary-cards">
                        <div class="summary-card-balance income">
                            <span class="summary-label">Ingresos del Periodo</span>
                            <span class="summary-value" id="total-period-income">$0</span>
                        </div>
                        <div class="summary-card-balance expense">
                            <span class="summary-label">Gastos del Periodo</span>
                            <span class="summary-value" id="total-period-expenses">$0</span>
                        </div>
                        <div class="summary-card-balance balance">
                            <span class="summary-label">Balance del Periodo</span>
                            <span class="summary-value" id="total-period-balance">$0</span>
                        </div>
                    </div>
                </div>
                
                <div class="breakdown-container" id="balance-breakdown-container">
                </div>

                <div class="charts-section">
                    <div class="chart-container">
                        <h3 class="chart-title">Ingresos vs. Gastos (Dona)</h3>
                        <div class="canvas-wrapper">
                            <canvas id="period-summary-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3 class="chart-title" id="bar-chart-title">Balance Semanal (Barras)</h3>
                        <div class="canvas-wrapper">
                            <canvas id="balance-bar-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="full-report-section">
                    <button id="btn-generate-full-report" class="btn-main-action">
                        <span class="icon">üìà</span>
                        Generar Resumen Financiero Completo
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="invoices-view" id="invoices-view">
        <button class="back-btn" onclick="showDashboard('basic')">‚Üê Volver</button>
        <div class="invoices-container">
            <div class="invoices-header">
                <h2 class="invoices-main-title">Gesti√≥n de Facturas</h2>
                <p>Crea, visualiza y administra tus facturas de venta de forma sencilla.</p>
                <button class="btn-settings" id="btn-open-settings">‚öôÔ∏è Configuraci√≥n</button>
            </div>
            <div class="invoices-layout">
                <div class="invoice-form-container">
                    <h3 class="form-section-title">Nueva Factura</h3>
                    <form id="invoice-form">
                        <input type="hidden" id="editing-invoice-id">
                        
                        <div class="form-grid">
                            <div class="form-column">
                                <div class="form-group">
                                    <label for="client-name">Nombre del Cliente</label>
                                    <input type="text" id="client-name" required placeholder="Ej: John Doe">
                                </div>
                                <div class="form-group">
                                    <label for="client-id">NIT / C.C. del Cliente</label>
                                    <input type="text" id="client-id" required placeholder="Ej: 123456789-0">
                                </div>
                                 <div class="form-group">
                                    <label for="client-address">Direcci√≥n (Opcional)</label>
                                    <input type="text" id="client-address" placeholder="Ej: Calle 50 # 40 - 30">
                                </div>
                                <div class="form-group">
                                    <label for="client-phone">Tel√©fono (Opcional)</label>
                                    <input type="tel" id="client-phone" placeholder="Ej: 3001234567">
                                </div>
                            </div>
                            <div class="form-column">
                                <div class="form-group">
                                    <label for="invoice-number">N¬∫ de Factura</label>
                                    <input type="text" id="invoice-number" required>
                                </div>
                                <div class="form-group">
                                    <label for="issue-date">Fecha de Emisi√≥n</label>
                                    <input type="date" id="issue-date" required>
                                </div>
                                <div class="form-group">
                                    <label for="due-date">Fecha de Vencimiento</label>
                                    <input type="date" id="due-date" required>
                                </div>
                            </div>
                        </div>
                        
                        <hr style="border-color: var(--card-border); margin: 1.5rem 0;">
                        
                        <h4 style="margin-bottom: 1rem; color: var(--text-secondary);">√çtems de la Factura</h4>
                        <div id="invoice-items-container"></div>
                        <button type="button" id="add-invoice-item-btn" class="btn-secondary">+ A√±adir √çtem</button>
                        
                        <div class="invoice-totals-breakdown" style="margin-top: 1.5rem;">
                            <div class="total-row">
                                <span>Subtotal</span>
                                <span id="subtotal-display">$0</span>
                            </div>
                            <div class="form-grid-2-col">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="invoice-discount">Descuento (%)</label>
                                    <input type="number" id="invoice-discount" value="0" min="0" max="100">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="invoice-tax">Impuesto (%)</label>
                                    <input type="number" id="invoice-tax" value="0" min="0">
                                </div>
                            </div>
                            <div class="total-row">
                                <span>Descuento</span>
                                <span id="discount-display">-$0</span>
                            </div>
                            <div class="total-row">
                                <span>Impuestos</span>
                                <span id="tax-display">+$0</span>
                            </div>
                            <div class="total-row grand-total">
                                <span>TOTAL</span>
                                <span id="total-display">$0</span>
                            </div>
                        </div>

                         <div class="form-group" style="margin-top: 1.5rem;">
                            <label for="invoice-notes">Notas / T√©rminos (Opcional)</label>
                            <textarea id="invoice-notes" rows="3" placeholder="T√©rminos y condiciones, agradecimientos, etc."></textarea>
                        </div>
                        
                        <button type="submit" class="btn-main-action">üíæ Guardar Factura</button>
                    </form>
                </div>
                <div class="invoice-list-container">
                    <h3 class="list-section-title">Facturas Emitidas</h3>
                    <div id="invoices-list">
                        <p>No hay facturas registradas.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="dashboard" id="basic-dashboard">
        <button class="back-btn" onclick="showHero()">‚Üê Volver</button>
        <div class="dashboard-header">
            <h2 class="dashboard-title">Contabilidad B√°sica</h2>
            <p>Herramientas simples para empezar tu negocio</p>
        </div>
        
        <div class="search-container">
            <input type="text" class="search-input" placeholder="Buscar funci√≥n..." onkeyup="filterFunctions(this.value, 'basic')">
        </div>
        
        <div class="functions-grid" id="basic-functions">
            <div class="function-card" onclick="showCalendar()">
                <h4 class="function-title">Registro de Ingresos y Gastos</h4>
                <p class="function-description">Registra y controla todas tus entradas y salidas de dinero en un solo lugar.</p>
            </div>
            <div class="function-card" onclick="showBalanceView()">
                <h4 class="function-title">Balance Simple</h4>
                <p class="function-description">Ve cu√°nto tienes vs cu√°nto debes de forma clara.</p>
            </div>
            <div class="function-card" onclick="showInvoicesView()">
                <h4 class="function-title">Facturas B√°sicas</h4>
                <p class="function-description">Crea facturas profesionales en minutos.</p>
            </div>
            <div class="function-card" onclick="showInventoryView()">
                <h4 class="function-title">üì¶ Control de Inventario</h4>
                <p class="function-description">Gestiona tu stock de productos, costos y precios.</p>
            </div>
            <div class="function-card">
                <h4 class="function-title">Registro de ahorros</h4>
                <p class="function-description">Registra tus ahorros y metas.</p>
            </div>
            <div class="function-card">
                <h4 class="function-title">Flujo de Caja</h4>
                <p class="function-description">Visualiza el dinero que entra y sale.</p>
            </div>
            <div class="function-card">
                <h4 class="function-title">Recordatorios</h4>
                <p class="function-description">No olvides fechas importantes de pagos.</p>
            </div>
            <div class="function-card">
                <h4 class="function-title">Backup Autom√°tico</h4>
                <p class="function-description">Tus datos siempre seguros en la nube.</p>
            </div>
        </div>
    </div>
    <div class="dashboard" id="intermediate-dashboard">
        <button class="back-btn" onclick="showHero()">‚Üê Volver</button>
        </div>

    <div class="dashboard" id="advanced-dashboard">
        <button class="back-btn" onclick="showHero()">‚Üê Volver</button>
        </div>
    <div class="analysis-report-view" id="full-analysis-view">
        <button class="back-btn" onclick="showBalanceView()">‚Üê Volver al Balance</button>
        <div class="analysis-container">
            <div class="analysis-header">
                <h2>Reporte Financiero Detallado</h2>
                <p id="analysis-period">Mes y A√±o</p>
            </div>

            <div class="kpi-grid">
                <div class="kpi-card income">
                    <h4>Ingresos Totales</h4>
                    <p id="kpi-total-income">$0</p>
                </div>
                <div class="kpi-card expense">
                    <h4>Gastos Totales</h4>
                    <p id="kpi-total-expense">$0</p>
                </div>
                <div class="kpi-card balance">
                    <h4>Balance Neto</h4>
                    <p id="kpi-net-balance">$0</p>
                </div>
                <div class="kpi-card special">
                    <h4>D√≠a M√°s Rentable</h4>
                    <p id="kpi-best-day">N/A</p>
                </div>
            </div>

            <div class="analysis-charts-grid">
                <div class="analysis-chart-container">
                    <h3 class="analysis-card-title" id="flow-chart-title">Flujo de Dinero Diario</h3>
                    <div class="canvas-wrapper-analysis">
                        <canvas id="daily-flow-chart"></canvas>
                    </div>
                </div>
                <div class="analysis-chart-container">
                    <h3 class="analysis-card-title">Distribuci√≥n de Ingresos</h3>
                     <div class="canvas-wrapper-analysis">
                        <canvas id="income-distribution-chart"></canvas>
                    </div>
                </div>
                <div class="analysis-chart-container">
                    <h3 class="analysis-card-title">Distribuci√≥n de Gastos</h3>
                     <div class="canvas-wrapper-analysis">
                        <canvas id="expense-distribution-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="category-tables-grid">
                <div class="category-table-container">
                    <h3 class="analysis-card-title" id="income-table-title">Ingresos por Categor√≠a</h3>
                    <div class="table-wrapper">
                        <table id="category-income-table">
                            <thead>
                                <tr>
                                    <th>Categor√≠a</th>
                                    <th>Monto Total</th>
                                    <th>Porcentaje del Total</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="category-table-container">
                    <h3 class="analysis-card-title" id="expense-table-title">Gastos por Categor√≠a</h3>
                    <div class="table-wrapper">
                        <table id="category-expense-table">
                            <thead>
                                <tr>
                                    <th>Categor√≠a</th>
                                    <th>Monto Total</th>
                                    <th>Porcentaje del Total</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="strategic-insights-panel">
                <div class="insight-column">
                    <h3 class="insight-column-title">
                        <span class="icon">‚úÖ</span> Puntos Positivos
                    </h3>
                    <div id="positive-insights-content">
                    </div>
                </div>
                <div class="insight-column">
                    <h3 class="insight-column-title">
                        <span class="icon">‚ö†Ô∏è</span> √Åreas de Atenci√≥n
                    </h3>
                    <div id="attention-insights-content">
                    </div>
                </div>
                <div class="insight-column">
                    <h3 class="insight-column-title">
                        <span class="icon">üí°</span> Sugerencias y Oportunidades
                    </h3>
                    <div id="recommendation-insights-content">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="invoices-view" id="inventory-view" style="display: none;"> <button class="back-btn" onclick="showDashboard('basic')">‚Üê Volver</button>
        <div class="invoices-container">
            <div class="invoices-header">
                <h2 class="invoices-main-title">Gesti√≥n de Inventario</h2>
                <p>A√±ade, edita y controla el stock de tus productos.</p>
            </div>
            <div class="invoices-layout">
                <div class="invoice-form-container">
                    <h3 class="form-section-title" id="product-form-title">A√±adir Nuevo Producto</h3>
                    <form id="inventory-form">
                        <input type="hidden" id="editing-product-id">
                        
                        <div class="form-grid">
                            <div class="form-column">
                                <div class="form-group">
                                    <label for="product-name">Nombre del Producto</label>
                                    <input type="text" id="product-name" required placeholder="Ej: Camiseta T-Shirt Negra">
                                </div>
                                <div class="form-group">
                                    <label for="product-sku">SKU / C√≥digo (Opcional)</label>
                                    <input type="text" id="product-sku" placeholder="Ej: CAM-NEG-001">
                                </div>
                                 <div class="form-group">
                                    <label for="product-description">Descripci√≥n</label>
                                    <textarea id="product-description" rows="3" placeholder="Detalles del producto, material, talla, etc."></textarea>
                                </div>
                            </div>
                            <div class="form-column">
                                 <div class="form-group">
                                    <label for="product-category">Categor√≠a de Producto</label>
                                    <input type="text" id="product-category" list="product-categories-list" required placeholder="Ej: Ropa, Accesorios">
                                    <datalist id="product-categories-list"></datalist>
                                </div>
                                <div class="form-group">
                                    <label for="product-cost">Costo de Compra (Unitario)</label>
                                    <input type="number" id="product-cost" step="0.01" min="0" required placeholder="Precio al que compras">
                                </div>
                                <div class="form-group">
                                    <label for="product-price">Precio de Venta (Unitario)</label>
                                    <input type="number" id="product-price" step="0.01" min="0" required placeholder="Precio al que vendes">
                                </div>
                                <div class="form-group">
                                    <label for="initial-stock">Stock Inicial</label>
                                    <input type="number" id="initial-stock" step="1" min="0" required placeholder="Cantidad inicial">
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-main-action" id="save-product-btn">üíæ Guardar Producto</button>
                         <button type="button" class="btn-secondary" id="cancel-edit-btn" style="display: none;">Cancelar Edici√≥n</button>
                    </form>
                </div>

                <div class="invoice-list-container">
                    <h3 class="list-section-title">Listado de Productos</h3>
                    <div class="form-group">
                         <input type="text" id="product-search-input" class="search-input" placeholder="üîç Buscar por nombre, SKU o categor√≠a...">
                    </div>
                    <div class="table-wrapper" style="max-height: 45vh; overflow-y: auto;">
                        <table id="product-table">
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Categor√≠a</th>
                                    <th>Stock Actual</th>
                                    <th>Costo Ponderado</th>
                                    <th>Precio Venta</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="product-table-body">
                                </tbody>
                        </table>
                    </div>
                     <div id="product-list-empty" style="text-align: center; padding: 2rem; display: none;">
                        <p>No hay productos registrados.</p>
                    </div>
                </div>
            </div>
            
            <div class="invoices-header" style="margin-top: 2rem;">
                <h2 class="invoices-main-title">Historial de Movimientos</h2>
                <p>Registro de todas las entradas y salidas de inventario.</p>
            </div>
            <div class="table-wrapper" style="max-height: 40vh; overflow-y: auto;">
                <table id="inventory-history-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Producto</th>
                            <th>Tipo</th>
                            <th>Cantidad</th>
                            <th>Valor Total</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-history-body">
                        </tbody>
                </table>
            </div>
            <div id="inventory-history-empty" style="text-align: center; padding: 2rem; display: none;">
                <p>No hay movimientos de inventario registrados.</p>
            </div>
        </div>
    </div>
    
    <div id="weekly-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-header-text">
                    <h2>Detalle de Transacciones</h2>
                    <p id="modal-week-range">Rango de fechas de la semana</p>
                </div>
                <span class="close-btn" id="modal-close-btn">&times;</span>
            </div>
            <div class="modal-body">
                <div class="table-wrapper-modal">
                    <table id="modal-transactions-table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Descripci√≥n</th>
                                <th>Categor√≠a</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody id="modal-table-body">
                        </tbody>
                    </table>
                </div>

                <div class="modal-summary-section">
                    <div class="summary-box">
                        <h4 class="summary-box-title">Subtotales</h4>
                        <div class="summary-line">
                            <span>Ingreso</span>
                            <span class="positive-value" id="modal-subtotal-income">$0</span>
                        </div>
                        <div class="summary-line">
                            <span>Egreso</span>
                            <span class="negative-value" id="modal-subtotal-expense">$0</span>
                        </div>
                    </div>
                    <div class="summary-box total-box">
                        <h4 class="summary-box-title">Total Neto</h4>
                        <div class="summary-line">
                            <span id="modal-final-total">$0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close-btn">&times;</span>
            <h3 class="form-section-title">Configuraci√≥n de la Empresa</h3>
            <form id="settings-form">
                <div class="form-group">
                    <label>Logo de la Empresa</label>
                    <input type="file" id="company-logo-input" accept="image/*">
                    <img id="logo-preview" src="" alt="Vista previa del logo" style="max-width: 150px; margin-top: 10px;">
                </div>
                <div class="form-group"><label for="myCompanyName">Nombre de tu Empresa</label><input type="text" id="myCompanyName" name="myCompanyName" placeholder="Tu Empresa S.A.S."></div>
                <div class="form-group"><label for="myCompanyNit">NIT / C.C.</label><input type="text" id="myCompanyNit" name="myCompanyNit" placeholder="900123456-7"></div>
                <div class="form-group"><label for="myCompanyAddress">Direcci√≥n</label><input type="text" id="myCompanyAddress" name="myCompanyAddress" placeholder="Carrera 1 # 2 - 3, Bogot√°"></div>
                <div class="form-group"><label for="myCompanyPhone">Tel√©fono</label><input type="tel" id="myCompanyPhone" name="myCompanyPhone" placeholder="3109876543"></div>
                <button type="submit" class="btn-main-action" style="margin-top: 1rem;">Guardar Configuraci√≥n</button>
            </form>
        </div>
    </div>
    
    <div id="invoice-preview-modal" class="modal">
        <div class="modal-content-invoice">
            <span class="modal-close-btn">&times;</span>
            <div id="invoice-preview-content">
                <div class="invoice-preview-header">
                    <img id="preview-logo" src="" alt="Logo de la Empresa" class="company-logo-preview">
                    <div class="invoice-preview-header-right">
                        <h2 id="preview-invoice-title">FACTURA</h2>
                        <p id="preview-invoice-id"></p>
                    </div>
                </div>

                <div class="invoice-preview-parties">
                    <div class="company-info">
                        <h4>DE:</h4>
                        <p><strong id="my-company-name"></strong></p>
                        <p id="my-company-details" style="white-space: pre-wrap;"></p>
                    </div>
                    <div class="client-info">
                        <h4>PARA:</h4>
                        <p><strong id="client-info-name"></strong></p>
                        <p id="client-info-details" style="white-space: pre-wrap;"></p>
                    </div>
                </div>

                <div class="invoice-preview-dates">
                    <div><h4>Fecha Emisi√≥n:</h4><p id="preview-issue-date"></p></div>
                    <div style="text-align: right;"><h4>Fecha Vencimiento:</h4><p id="preview-due-date"></p></div>
                </div>

                <div class="invoice-table-container">
                    <table class="invoice-items-table">
                        <thead>
                            <tr>
                                <th>Descripci√≥n</th>
                                <th class="text-right">Cant.</th>
                                <th class="text-right">P. Unit.</th>
                                <th class="text-right">Total</th>
                            </tr>
                        </thead>
                        <tbody id="preview-items-tbody"></tbody>
                    </table>
                </div>

                <div class="invoice-preview-summary">
                    <div class="invoice-preview-notes">
                        <h4>Notas:</h4>
                        <p id="preview-notes"></p>
                    </div>
                    <div class="invoice-preview-totals">
                        <table>
                            <tr><td>Subtotal:</td><td class="text-right" id="preview-subtotal"></td></tr>
                            <tr><td>Descuento:</td><td class="text-right" id="preview-discount"></td></tr>
                            <tr><td>Impuestos:</td><td class="text-right" id="preview-tax"></td></tr>
                            <tr class="grand-total-row">
                                <td>TOTAL:</td>
                                <td class="text-right" id="preview-grand-total"></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="btn-mark-paid" class="btn-action secondary">Marcar como Pagada</button>
                <button id="btn-download-pdf" class="btn-action primary">Descargar PDF</button>
            </div>
        </div>
    </div>
    
    <div id="notification-container"></div>

    <script src="JS/scripts.js"></script>
    <script src="JS/calendar.js"></script>
    <script src="JS/balance.js"></script>
    <script src="JS/analysis.js"></script>
    <script src="JS/invoices.js"></script>
    <script src="JS/inventory.js"></script>
    <script src="JS/notifications.js"></script>
</body>
</html>